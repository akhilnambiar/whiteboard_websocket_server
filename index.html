
<html>
  <head>
    <style>
      body {
        font-family: "Helvetica Neue", helvetica, arial;
        padding: 15px;
      }

      ul {
        list-style: none;
        margin: 0;
        padding: 0;
      }

      ul li {
        line-height: 1.4;
      }
    </style>

    <script>
    /*
      function hexToBase64(str) {
        return btoa(String.fromCharCode.apply(null, str.replace(/\r|\n/g, "").replace(/([\da-fA-F]{2}) ?/g, "0x$1 ").replace(/ +$/, "").split(" ")));
      }
    */
      var host = location.origin.replace(/^http/, 'ws')
      var ws = new WebSocket(host);
      ws.onmessage = function (event) {
        console.log("WORKING");
        console.log(event.data.type);
        var li = document.createElement('li');
        //li.innerHTML = JSON.parse(event.data);
        li.innerHTML = event.data
        //document.querySelector('#pings').appendChild(li);
        img.src = 'data:image/jpeg;base64,' + hexToBase64(event.data);
        document.getElementById('warble-msg').innerHTML = img;
        document.body.appendChild(img);
      };
    </script>
  </head>
  <body>
    <h1>Pings</h1>
    <ul id='pings'></ul>
    <h3 id="warble-msg"></h3>
  </body>
</html>
<!--
OLD VERSION WITH WS

<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Warble Warble!</title>
  <link rel="stylesheet" type="text/css" href="style.css"></link> 
</head>
<body>
  <img src="http://blog.birdbox.com/wp-content/uploads/2012/09/logoH21.png" alt="Birdbox"></img>
  <div class="status">
    <h2>Status: <span class="connect-status disconnected">Disconnected</span></h2>
  </div>
  <h3 id="warble-msg"></h3>
  <form class="msg-sender">
    <input type="text" placeholder="Type something"></input>
  </form>

  <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/sockjs-client/0.3.4/sockjs.min.js"></script>
  <script src="warble.js"></script>
</body>
</html>
-->